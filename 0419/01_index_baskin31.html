<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>01_제이쿼리_베스킨라빈스_2단내비게이션, 이미지슬라이드(반응형)</title>
    <!-- 리셋 -->
    <link rel="stylesheet" href="./css/reset.css" type="text/css">
    <!-- common css -->
    <link rel="stylesheet" href="./css/common.css" type="text/css">
    <!-- main css -->
    <style>
      main{padding-top: 46px; /*겹치지 않게 내리기*/ position: relative; }
      .mslide{width: 100%; height: 80vh; margin: 0 auto; overflow: hidden; }
      .mslide > ul{width: 500%; display: flex;}
      .mslide > ul >li{width: 100%;}
      .mslide > ul >li img{width: 100%;position: relative; }
      .mslide i.fas{ color: #fff; padding: 22px 30px; border: 3px solid #fff; position: absolute; top: 43%; font-size: 40px; border-radius: 50%; cursor: pointer;      }
      .mslide i.fas:hover{background-color: rgba(255,255,255,0.3);border: 3px solid rgba(255,255,255,0.3);}
      .mslide i.fa-angle-left{left: 0px;}
      .mslide i.fa-angle-right{right: 0px;}
      .btn{position: fixed; bottom: 5%; left: 45%;display: flex;}
      .btn >div{width: 15px; height: 15px; background-color: #ccc;margin: 5px;border-radius: 50%; cursor: pointer; }
      .act{background-color: red !important;}
    </style>
    <!--아이콘폰트 주소  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" type="text/css" >
    <!-- 제이쿼리 연결 -->
    <!-- 1. 제이쿼리 직접 연결하기 -->
    <script src="./script/jquery-3.7.1.min.js"></script> <!--최적화 버전 min  -->
    <!-- 2. JQUERY.COM에서 CND방식으로 연결 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
  <!-- 상단 -->
  <header>
    <div class="h_top">
      <h1>
        <a href="01_index_baskin31.html" title="메인페이지로 바로가기">
          <img src="./images/logo_baskinrobbins.png" alt="상단로고">
        </a>
      </h1>
    </div>
    <div class="h_bottom">
      <nav>
        <!-- 로그인, join -->
        <ul class="lnb">
          <li><a href="login.html" title="로그인">login</a></li>
          <li><a href="join.html" title="회원가입">join</a></li>
        </ul>
        <!-- 메인네비게이션 -->
        <ul class="gnb">
          <li><a href="#" title="이달의 제품">flaver of the month</a>
            <ul class="sub">
              <li>
                <a href="#" title="아이스크림">
                <img src="./images/img_monthly_fom_220930.png" alt="이달의신제품">
                </a>
              </li>
            </ul>
          </li>
          <li><a href="#" title="메뉴">menu</a>
            <ul class="sub">
              <li><a href="#" title="아이스크림">아이스크림</a></li>
              <li><a href="#" title="아이스크림케이크">아이스크림케이크</a></li>
              <li><a href="#" title="음료">음료</a></li>
              <li><a href="#" title="커피">커피</a></li>
              <li><a href="#" title=">디저트">디저트<a></li>
            </ul>
          </li>
          <li><a href="#" title="영양성분">영양성분 및 알레르기</a>
            <ul class="sub">
              <li><a href="#" title="아이스크림">아이스크림</a></li>
              <li><a href="#" title="아이스크림케이크">아이스크림케이크</a></li>
              <li><a href="#" title="음료">음료</a></li>
              <li><a href="#" title="커피">커피</a></li>
              <li><a href="#" title=">디저트">디저트<a></li>
            </ul>
          </li>
          <li><a href="#" title="이벤트">event</a>
            <ul class="sub">
              <li><a href="#" title="진행중인 이벤트">진행중인 이벤트</a></li>
              <li><a href="#" title="당첨자발표">당첨자 발표</a></li>
            </ul>
          </li>
          <li><a href="#" title="스토어">store</a>
            <ul class="sub">
              <li><a href="#" title="매장찾기">매장찾기</a></li>
              <li><a href="#" title="고객센터">고객센터</a></li>
              <li><a href="#" title="단체주문">단체주문</a></li>
            </ul>
          </li>
          <li><a href="#" title="소개">about</a>
            <ul class="sub">
              <li><a href="#" title="공지사항">공지사항</a></li>
              <li><a href="#" title="보도자료">보도자료</a></li>
              <li><a href="#" title="채용정보">채용정보</a></li>
              <li><a href="#" title="점포개설문의">점포개설문의</a></li>
              <li><a href="#" title="CONTRACT US">CONTRACT US</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  
  <!-- 메인 -->
  <main>
    <article class="mslide">
      <ul>
        <li><a href="#" title=""><img src="../0422/images/slide01.png" alt="슬라이드1"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide02.png" alt="슬라이드2"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide3.jpg" alt="슬라이드3"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide4.jpg" alt="슬라이드4"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide5.jpg" alt="슬라이드5"></a></li>
      </ul>
      <i class="fas fa-angle-left"></i>
      <i class="fas fa-angle-right"></i>
      <div class="btn">
        <div id="btn1" class="act toggle"></div>
        <div id="btn2" class="toggle"></div>
        <div id="btn3" class="toggle"></div>
        <div id="btn4" class="toggle"></div>
        <div id="btn5" class="toggle"></div>
      </div>
    </article>
  </main>
  
  <!-- 푸터 -->
  <footer>
    <address> copyright &copy; 2023 BRKOREA company. All rights Reserved.</address>
  </footer>

<!-- 자바스크립트로 2단 네비게이션 구현 -->

<script>
    //1. 변수 선언
    const gnb = document.querySelector('.h_bottom .gnb');
    const h_bottom = document.querySelector('.h_bottom');
/*
    //2. gnb에 마우스 오버시 높이가 달라져서, 서브가 나온다.
    gnb.addEventListener('mouseenter',function(){
      //gnb.parentElement.parentElement.style.height='326px'; 부모의 부모를 찾아도 됨
      h_bottom.style.height='326px';
    });
    //3. 마우스 아웃시 높이가 원래대로(46px) 작아진다.
    gnb.addEventListener('mouseleave',function(){
      //this.parentElement.parentElement.style.height = '46px';
      h_bottom.style.height='46px';
    });
*/
//<!-- 제이쿼리로 시행 -->
$(document).ready(function(){
    
    $(gnb).hover(function(){ //마우스 오버시 (자바스크립트 변수니까 $()안에 써주기)
      $(h_bottom).stop().animate({'height':'326px'},300);
    }
    ,function(){ // 마우스 아웃시
      $(h_bottom).stop().animate({'height':'46px'},300); //한번만 하겠다 : .stop()
    });


//메인 슬라이드
  //1. mslide의 마지막 li태그를 첫번째 li태그 앞으로 옮긴다
    $('.mslide ul li:last-child').insertBefore('.mslide ul li:first-child'); 
  //2. 왼쪽으로 -1600px만큼 이동해 1번이 가운데 오도록 한다 (위치가 바뀌면서 5번이 가운데로 오는데, 그러면 안된다)
    $('.mslide ul').css('margin-left','-100%');
  //3. 함수
    function move_left(){
      $('.mslide ul').animate({'margin-left':'-200%'}, 500, function(){//슬라이드 전체 목록을 왼쪽으로 1칸 이동
        $('.mslide ul li:first-child').insertAfter('.mslide ul li:last-child'); //5번을 4번 뒤로
        $('.mslide ul').css('margin-left','-100%'); //1번이 2칸 밀린위치를 다시 오른쪽으로 이동
      });
    };
    function move_right(){
      $('.mslide ul').animate({'margin-left':'0px'}, 500, function(){//슬라이드 전체 목록을 오른쪽으로 1칸 이동
        $('.mslide ul li:last-child').insertBefore('.mslide ul li:first-child'); //4번이 5번 앞으로 오게
        $('.mslide ul').css('margin-left','-100%'); //1번이 2칸 밀린위치를 다시 오른쪽으로 이동
      });
    };
  //4. 4초마다 함수 부르기- setinterval();
    let Timer = setInterval(move_left, 4000);
    // let Timer = setInterval(move_right, 4000);

  //5. 좌측 버튼을 클릭하면, 일단 인터벌 멈추고, 움직이기
    const l_btn = $('.mslide i.fa-angle-left');
    const r_btn = $('.mslide i.fa-angle-right');

    l_btn.click(function(){clearInterval(Timer); move_left();});
    r_btn.click(function(){clearInterval(Timer); move_right();});

  //6. 버튼에서 손을 떼면 다시 오토가 돌게
    $('.mslide i.fas').mouseleave(function(){
      clearInterval(Timer);
      Timer = setInterval(move_left, 4000)});
  
  ///////////////////////버튼을 누르면 화면이 옮겨지게
  const btn = $('.toggle');
  let i;
  //컨트롤 버튼을 누르면 슬라이드 바뀌도록

  btn.click(function(){
    //버튼을 누르면 색을 바꿔라
    btn.removeClass('act');//서식 제거하기
    $(this).addClass('act'); //서식 추가하기

    clearInterval(Timer); //자동슬라이드 종료

    i = $(this).index();
    console.log(i);
    if(i==0){
      $('.mslide ul').html(
        `
        <li><a href="#" title=""><img src="../0422/images/slide5.jpg" alt="슬라이드5"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide01.png" alt="슬라이드1"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide02.png" alt="슬라이드2"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide3.jpg" alt="슬라이드3"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide4.jpg" alt="슬라이드4"></a></li>`
      )
    }else if(i==1){
      $('.mslide ul').html(
        `
        <li><a href="#" title=""><img src="../0422/images/slide01.png" alt="슬라이드1"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide02.png" alt="슬라이드2"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide3.jpg" alt="슬라이드3"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide4.jpg" alt="슬라이드4"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide5.jpg" alt="슬라이드5"></a></li>`
      )
    }
    else if(i==2){
      $('.mslide ul').html(
        `
        <li><a href="#" title=""><img src="../0422/images/slide02.png" alt="슬라이드2"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide3.jpg" alt="슬라이드3"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide4.jpg" alt="슬라이드4"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide5.jpg" alt="슬라이드5"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide01.png" alt="슬라이드1"></a></li>`
      )
    }
    else if(i==3){
      $('.mslide ul').html(
        `
        <li><a href="#" title=""><img src="../0422/images/slide3.jpg" alt="슬라이드3"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide4.jpg" alt="슬라이드4"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide5.jpg" alt="슬라이드5"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide01.png" alt="슬라이드1"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide02.png" alt="슬라이드2"></a></li>`
      )
    }
    else if(i==4){
      $('.mslide ul').html(
        `
        <li><a href="#" title=""><img src="../0422/images/slide4.jpg" alt="슬라이드4"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide5.jpg" alt="슬라이드5"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide01.png" alt="슬라이드1"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide02.png" alt="슬라이드2"></a></li>
        <li><a href="#" title=""><img src="../0422/images/slide3.jpg" alt="슬라이드3"></a></li>`
      )
    }
  });
    //7. 버튼에서 손을 떼면 다시 오토가 돌게
    btn.mouseleave(function(){
      clearInterval(Timer);
      Timer = setInterval(move_left, 4000)});

    ///////////사진이 슬라이딩 되면 버튼 색이 같이 변하게 
    $('.toggle:last-child').insertBefore('.toggle:first-child');  // 마지막 토글을 첫번째 토글 전에 넣어라
});


</script>


</body>
</html>